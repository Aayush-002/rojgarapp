{% load i18n %}

<header class="municipal-header">
  <!-- Top Banner -->
  <div class="top-banner py-4">
    <div class="container">
      <div class="row align-items-center justify-content-between">
        <!-- Municipality Logo and Text -->
        <div class="col-lg-9 col-md-8">
          <a href="https://khadakmun.gov.np/" class="municipality-brand">
            <img
              src="/media/new_logo.png"
              alt="खडक नगरपालिका Logo"
              class="municipality-logo"
            />
            <div class="municipality-info">
              <h1 class="municipality-title">
                खडक नगरपालिका, नगर कार्यपालिकाकाे कार्यालय
              </h1>
              <h2 class="municipality-subtitle">
                कल्याणपुर, सप्तरी, मधेश प्रदेश
              </h2>
            </div>
          </a>
        </div>
        <!-- Nepal Flag -->
        <div class="col-lg-3 col-md-4 text-end">
          <img
            src="https://khadakmun.gov.np/sites/khadakmun.gov.np/files/img/Flag_of_Nepal.gif"
            alt="Nepal Flag"
            class="nepal-flag"
          />
        </div>
      </div>
    </div>
  </div>

  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand" href="/">{% trans "RojgarApp" %}</a>

      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a
              class="nav-link {% if request.path == '/' %}active{% endif %}"
              href="/"
              >{% trans "Home" %}</a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link {% if request.path == '/dashboard/' %}active{% endif %}"
              href="/dashboard"
              >{% trans "Dashboard" %}</a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link {% if request.path == '/forms_list/' %}active{% endif %}"
              href="/forms_list"
              >{% trans "Details" %}</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/forms"
              >{% trans "Register Your Details" %}</a
            >
          </li>
          {% if user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link" href="{% url 'logout' %}"
              >{% trans "Logout" %}</a
            >
          </li>
          {% else %}
          <li class="nav-item">
            <a class="nav-link" href="{% url 'login' %}">{% trans "Login" %}</a>
          </li>
          {% endif %}
          <!-- Language Toggle Dropdown -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="languageDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              {% trans "Language" %}
            </a>

            <ul
              class="dropdown-menu dropdown-menu-end"
              aria-labelledby="languageDropdown"
            >
              <form
                action="{% url 'set_language' %}"
                method="post"
                class="d-inline"
              >
                {% csrf_token %}
                <button
                  type="submit"
                  name="language"
                  value="en"
                  class="dropdown-item {% if LANGUAGE_CODE == 'en' %}active{% endif %}"
                >
                  {% trans "English" %}
                </button>
              </form>
              <form
                action="{% url 'set_language' %}"
                method="post"
                class="d-inline"
              >
                {% csrf_token %}
                <button
                  type="submit"
                  name="language"
                  value="ne"
                  class="dropdown-item {% if LANGUAGE_CODE == 'ne' %}active{% endif %}"
                >
                  {% trans "नेपाली" %}
                </button>
              </form>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <style>
    .municipal-header {
      background-color: #ffffff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .top-banner {
      background: linear-gradient(to right, #f8f9fa, #ffffff);
      border-bottom: 1px solid #e9ecef;
    }

    .municipality-brand {
      display: flex;
      align-items: center;
      text-decoration: none;
      gap: 1.5rem;
      transition: opacity 0.2s ease;
    }

    .municipality-brand:hover {
      opacity: 0.9;
    }

    .municipality-logo {
      max-width: 150px;
      height: auto;
    }

    .municipality-info {
      display: flex;
      flex-direction: column;
    }

    .municipality-title {
      color: #9e0c18;
      font-size: 1.5rem;
      margin: 0;
      font-weight: 600;
    }

    .municipality-subtitle {
      color: #9e0c18;
      font-size: 1.25rem;
      margin: 0.25rem 0 0 0;
      font-weight: 500;
    }

    .nepal-flag {
      max-width: 100px;
      height: auto;
      transition: transform 0.3s ease;
    }

    .nepal-flag:hover {
      transform: scale(1.05);
    }

    .navbar {
      background-color: #1a237e;
      padding: 0.75rem 0;
    }

    .navbar-brand {
      color: #ffffff;
      font-weight: 600;
      font-size: 1.25rem;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      transition: background-color 0.2s ease;
    }

    .navbar-brand:hover {
      background-color: rgba(255, 255, 255, 0.1);
      color: #ffffff;
    }

    .navbar-nav .nav-link {
      color: #ffffff;
      padding: 0.5rem 1rem;
      font-weight: 500;
      border-radius: 4px;
      transition: all 0.2s ease;
    }

    .navbar-nav .nav-link:hover,
    .navbar-nav .nav-link.active {
      background-color: rgba(255, 255, 255, 0.1);
      color: #ffffff;
    }

    .navbar-toggler {
      border-color: rgba(255, 255, 255, 0.5);
    }

    .navbar-toggler-icon {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
    }

    @media (max-width: 991.98px) {
      .municipality-brand {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }

      .municipality-title {
        font-size: 1.25rem;
      }

      .municipality-subtitle {
        font-size: 1rem;
      }

      .navbar-nav {
        padding: 1rem 0;
      }

      .navbar-nav .nav-link {
        padding: 0.75rem 1rem;
      }
    }

    @media (max-width: 767.98px) {
      .nepal-flag {
        max-width: 80px;
        margin-top: 1rem;
      }

      .municipality-logo {
        max-width: 120px;
      }
    }
  </style>
</header>